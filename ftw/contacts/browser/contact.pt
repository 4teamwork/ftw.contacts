<html lang="en"
  metal:use-macro="here/main_template/macros/master"
  xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  i18n:domain="ftw.contacts">

  <body>
    <div metal:fill-slot="content-core">
      <metal:main-macro define-macro="content-core">
        <div id="contact-view">
          <div class="contactInfos">
            <table class="contacInfo">
              <tr tal:condition="python: context.firstname and context.lastname">
                <th i18n:translate="label_name">Name</th>
                <td>
                  <tal:title tal:condition="context/academic_title" tal:replace="context/academic_title" />
                  <tal:name tal:replace="string:${context/lastname} ${context/firstname}" />
                </td>
              </tr>
              <tr tal:condition="context/function">
                <th i18n:translate="label_function">Function</th>
                <td tal:content="context/function" />
              </tr>
              <tr tal:condition="context/organization">
                <th i18n:translate="label_organization">Organization</th>
                <td tal:content="context/organization" />
              </tr>
              <tr tal:condition="context/department">
                <th i18n:translate="label_department">Department</th>
                <td tal:content="context/department" />
              </tr>
              <tr tal:condition="python: context.postal_code and context.city and context.address">
                <th i18n:translate="label_address">Address</th>
                <td>
                  <span tal:replace="structure python:view.safe_html(context.address)" />
                  <span tal:replace="context/postal_code" />
                  <span tal:replace="context/city" />
                </td>
              </tr>
              <tr tal:condition="context/phone_office">
                <th i18n:translate="label_phone_office">Office phone number</th>
                <td tal:content="context/phone_office" />
              </tr>
              <tr tal:condition="context/phone_mobile">
                <th i18n:translate="label_phone_mobile">Mobile phone number</th>
                <td tal:content="context/phone_mobile" />
              </tr>
              <tr tal:condition="context/fax">
                <th i18n:translate="label_fax">Fax number</th>
                <td tal:content="context/fax" />
              </tr>
              <tr tal:condition="context/email">
                <th i18n:translate="label_email">E-Mail</th>
                <td>
                  <a tal:attributes="href string:mailto:${context/email}"
                  tal:content="context/email" />
                </td>
              </tr>
              <tr tal:condition="context/www">
                <th i18n:translate="label_www">www</th>
                <td>
                <a tal:condition="context/www"
                   tal:content="python: context.www.replace('https://', '').replace('https://', '')"
                   tal:attributes="href context/www"
                   target="_blank" />
                </td>
              </tr>
            </table>
            <tal:private condition="context/address_private">
              <h2 i18n:translate="label_home_address">Home address</h2>
              <table class="contactPrivateInfo">
                <tr>
                  <th i18n:translate="label_address">Address</th>
                  <td>
                    <span tal:replace="structure python:view.safe_html(context.address_private)" /><br />
                    <span tal:replace="context/postal_code_private" />
                    <span tal:replace="context/city_private" />
                  </td>
                </tr>
                <tr tal:condition="context/phone_private">
                  <th i18n:translate="label_phone_private">Private phone number</th>
                  <td tal:content="context/phone_private" />
                </tr>
              </table>
            </tal:private>
          </div>
          <div class="contactPortrait" tal:condition="context/image">
            <img tal:replace="structure context/@@images/image/mini" />
          </div>
          <div tal:condition="not:context/image" tal:attributes="class string:contactPortrait gender-${context/gender}"></div>
          <div class="visualClear"></div>
          <div class="contactText" tal:condition="context/text" tal:content="structure context/text/output" />
          <tal:block tal:define="memberships view/get_memberships" tal:condition="memberships">
            <div class="memberships">
              <h3 i18n:translate="label_memberships">Memberships</h3>
              <ul>
                <tal:items tal:repeat="member memberships">
                  <li>
                    <a href="" tal:attributes="href string:${member/absolute_url}">
                      <span tal:condition="member/organization" tal:replace="member/organization"/>
                      <span tal:condition="member/function" tal:replace="string:(${member/function})"/></a>
                  </li>
                </tal:items>
              </ul>
            </div>
          </tal:block>
        </div>
      </metal:main-macro>
    </div>
  </body>
</html>
